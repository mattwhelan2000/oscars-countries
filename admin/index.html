<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Admin</title>
    <link rel="stylesheet" href="../assets/styles.css">
    <link rel="stylesheet" href="custom.css?v=20">
  </head>
  <body>
    <header>
      <div class="container">
        <h1>Site Admin</h1>
        <p class="small">Use this editor to add or update countries.</p>
      </div>
    </header>

    <!-- Our own, simple toolbar -->
    <nav id="kid-toolbar">
      <button data-goto="#/collections/countries" aria-label="Contents">Contents</button>
      <button data-goto="#/media" aria-label="Media">Media</button>
      <span class="spacer"></span>
      <button id="logout-btn" aria-label="Log out">Log out</button>
    </nav>

    <main class="container card">
      <script src="https://unpkg.com/netlify-identity-widget@1.9.2/build/netlify-identity-widget.js"></script>
      <script src="https://unpkg.com/decap-cms@^3.0.0/dist/decap-cms.js"></script>

      <script>
        // Handle toolbar buttons
        document.querySelectorAll('#kid-toolbar [data-goto]').forEach(btn => {
          btn.addEventListener('click', () => {
            const target = btn.getAttribute('data-goto');
            if (target) location.hash = target;
          });
        });

        // Logout via Netlify Identity
        const logoutBtn = document.getElementById('logout-btn');
        logoutBtn.addEventListener('click', () => {
          if (window.netlifyIdentity) window.netlifyIdentity.logout();
        });
      </script>
    </main>
  </body>
</html>
